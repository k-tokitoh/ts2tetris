{"mappings":"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","sources":["./src/ts/cell.ts","./src/ts/position.ts","./src/ts/tetrimino.ts","./src/ts/area.ts","./src/ts/grid.ts","./src/ts/game.ts","./src/ts/app.ts","./src/ts/index.ts"],"sourcesContent":["const FILLED_COLOR = \"#000000\";\nconst EMPTY_COLOR = \"#E0E0E0\";\n\nclass CellOuter {\n  elem: HTMLElement;\n  inner: CellInner;\n\n  constructor(parentElem) {\n    this.elem = this.initialElem();\n    this.inner = new CellInner(this.elem);\n    parentElem.appendChild(this.elem);\n  }\n\n  initialElem = (): HTMLElement => {\n    const elem = document.createElement(\"li\");\n    elem.style.listStyle = \"none\";\n    elem.style.width = \"78%\";\n    elem.style.height = \"78%\";\n    elem.style.border = \"2px solid\";\n    elem.style.display = \"flex\";\n    elem.style.justifyContent = \"center\";\n    elem.style.alignItems = \"center\";\n    return elem;\n  };\n\n  fill = () => {\n    this.elem.style.borderColor = FILLED_COLOR;\n    this.inner.fill();\n  };\n\n  clear = () => {\n    this.elem.style.borderColor = EMPTY_COLOR;\n    this.inner.clear();\n  };\n}\n\nclass CellInner {\n  elem: HTMLElement;\n\n  constructor(parentElem) {\n    this.elem = document.createElement(\"div\");\n    parentElem.appendChild(this.elem);\n\n    this.elem.style.width = \"75%\";\n    this.elem.style.height = \"75%\";\n    this.elem.style.backgroundColor = EMPTY_COLOR;\n  }\n\n  fill = () => {\n    this.elem.style.backgroundColor = FILLED_COLOR;\n  };\n\n  clear = () => {\n    this.elem.style.backgroundColor = EMPTY_COLOR;\n  };\n}\n\nexport default CellOuter;\n","class Position {\n  x: number;\n  y: number;\n\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  down = (): Position => {\n    return new Position(this.x, this.y - 1);\n  };\n\n  up = (): Position => {\n    return new Position(this.x, this.y + 1);\n  };\n\n  right = (): Position => {\n    return new Position(this.x + 1, this.y);\n  };\n\n  left = (): Position => {\n    return new Position(this.x - 1, this.y);\n  };\n\n  equals = (opponent: Position): boolean => {\n    return this.x === opponent.x && this.y === opponent.y;\n  };\n}\n\nexport default Position;\n","import Position from \"./position\";\nimport Grid from \"./grid\";\n\ntype Pattern = number[][];\n\ntype Shape = {\n  patterns: Pattern[];\n};\n\nconst shapeT: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [0, 0, 1, 0],\n      [0, 1, 1, 1],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 1, 1],\n      [0, 0, 1, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 1, 1, 1],\n      [0, 0, 1, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 0, 1, 0],\n      [0, 1, 1, 0],\n      [0, 0, 1, 0],\n    ],\n  ],\n};\n\nconst shapeI: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [1, 1, 1, 1],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 1, 0, 0],\n      [0, 1, 0, 0],\n      [0, 1, 0, 0],\n      [0, 1, 0, 0],\n    ],\n  ],\n};\n\nconst shapeO: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [0, 1, 1, 0],\n      [0, 1, 1, 0],\n      [0, 0, 0, 0],\n    ],\n  ],\n};\n\nconst shapeS: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [0, 0, 1, 1],\n      [0, 1, 1, 0],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 1, 1, 0],\n      [0, 0, 1, 0],\n    ],\n  ],\n};\n\nconst shapeZ: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [1, 1, 0, 0],\n      [0, 1, 1, 0],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 0, 1, 0],\n      [0, 1, 1, 0],\n      [0, 1, 0, 0],\n    ],\n  ],\n};\n\nconst shapeL: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [0, 0, 1, 0],\n      [1, 1, 1, 0],\n      [0, 0, 0, 0],\n    ],\n    [\n      [1, 0, 0, 0],\n      [1, 0, 0, 0],\n      [1, 1, 0, 0],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [1, 1, 1, 0],\n      [1, 0, 0, 0],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 1, 1, 0],\n      [0, 0, 1, 0],\n      [0, 0, 1, 0],\n    ],\n  ],\n};\n\nconst shapeJ: Shape = {\n  patterns: [\n    [\n      [0, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 1, 1, 1],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 1, 1, 0],\n      [0, 1, 0, 0],\n      [0, 1, 0, 0],\n    ],\n    [\n      [0, 0, 0, 0],\n      [0, 1, 1, 1],\n      [0, 0, 0, 1],\n      [0, 0, 0, 0],\n    ],\n    [\n      [0, 0, 0, 1],\n      [0, 0, 0, 1],\n      [0, 0, 1, 1],\n      [0, 0, 0, 0],\n    ],\n  ],\n};\n\nconst shapes = [shapeT, shapeI, shapeO, shapeZ, shapeS, shapeL, shapeJ];\n\nclass Tetrimino {\n  position: Position;\n  patternIndex: number = 0;\n  grid: Grid;\n  shape: Shape;\n\n  constructor(grid) {\n    this.shape = shapes[Math.floor(Math.random() * shapes.length)];\n    this.position = new Position(\n      (grid.area.width - this.shape.patterns[0].length) / 2,\n      grid.area.height - this.shape.patterns[0].length / 2\n    );\n    this.grid = grid;\n  }\n\n  currentPattern = (): Pattern => {\n    return this.shape.patterns[this.patternIndex];\n  };\n\n  occupiedPositions = (): Position[] => {\n    const positions: Position[] = [];\n    this.currentPattern().forEach((row, i) =>\n      row.forEach((cell, j) => {\n        if (cell == 1)\n          positions.push(\n            new Position(this.position.x + j, this.position.y + (3 - i))\n          );\n      })\n    );\n    return positions;\n  };\n\n  moveDown = (): boolean => {\n    return this.move(\n      () => (this.position = this.position.down()),\n      () => (this.position = this.position.up())\n    );\n  };\n\n  moveRight = (): boolean => {\n    return this.move(\n      () => (this.position = this.position.right()),\n      () => (this.position = this.position.left())\n    );\n  };\n\n  moveLeft = (): boolean => {\n    return this.move(\n      () => (this.position = this.position.left()),\n      () => (this.position = this.position.right())\n    );\n  };\n\n  rotateClockwise = (): boolean => {\n    return this.move(this.incrementPatternIndex, this.decrementPatternIndex);\n  };\n\n  rotateCounterClockwise = (): boolean => {\n    return this.move(this.decrementPatternIndex, this.incrementPatternIndex);\n  };\n\n  incrementPatternIndex = (): void => {\n    this.patternIndex = (this.patternIndex + 1) % this.shape.patterns.length;\n  };\n\n  decrementPatternIndex = (): void => {\n    this.patternIndex =\n      (this.patternIndex + this.shape.patterns.length - 1) %\n      this.shape.patterns.length;\n  };\n\n  move = (attempt: () => void, reset: () => void): boolean => {\n    attempt();\n    if (!this.canBeIn(this.occupiedPositions())) {\n      reset();\n      return false;\n    }\n    return true;\n  };\n\n  canBeIn = (positions: Position[]): boolean => {\n    return positions.every(this.grid.occupiable);\n  };\n}\n\nexport default Tetrimino;\n","class Area {\n  height: number;\n  width: number;\n\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n}\n\nexport default Area;\n","import Cell from \"./cell\";\nimport Tetrimino from \"./tetrimino\";\nimport Position from \"./position\";\nimport Area from \"./area\";\n\nclass Grid {\n  area: Area = new Area(20, 10);\n  elem: HTMLElement;\n  cells: Cell[][];\n  currentTetrimino: Tetrimino = new Tetrimino(this);\n  sediment: Position[] = [];\n\n  constructor(parentElem) {\n    this.elem = this.initialElem(this.area);\n    this.cells = this.initialCells(this.area);\n    parentElem.appendChild(this.elem);\n    this.draw();\n  }\n\n  initialElem = (area: Area): HTMLElement => {\n    const elem = document.createElement(\"ul\");\n    elem.style.display = \"grid\";\n    elem.style.gridTemplateColumns = `repeat(${area.width}, 32px)`;\n    elem.style.gridTemplateRows = `repeat(${area.height}, 32px)`;\n    elem.style.justifyItems = \"center\";\n    elem.style.alignItems = \"center\";\n    return elem;\n  };\n\n  initialCells = (area: Area): Cell[][] => {\n    return Array(area.height)\n      .fill(null)\n      .map(() =>\n        Array(area.width)\n          .fill(null)\n          .map(() => new Cell(this.elem))\n      );\n  };\n\n  draw = (): void => {\n    this.cells.forEach((cellsRow) => cellsRow.forEach((cell) => cell.clear()));\n    this.currentTetrimino\n      .occupiedPositions()\n      .concat(this.sediment)\n      .forEach((position) => {\n        if (this.within(position)) {\n          this.cells[this.area.height - 1 - position.y][position.x].fill();\n        }\n      });\n  };\n\n  tick = (): void => {\n    if (!this.currentTetrimino.moveDown()) {\n      this.sediment.push(...this.currentTetrimino.occupiedPositions());\n      this.currentTetrimino = new Tetrimino(this);\n    }\n    this.draw();\n  };\n\n  occupiable = (position: Position): boolean => {\n    return (\n      this.within(position) &&\n      this.sediment.every(\n        (PieceOfSediment) => !PieceOfSediment.equals(position)\n      )\n    );\n  };\n\n  within = (position: Position): boolean => {\n    return (\n      0 <= position.x &&\n      position.x <= this.area.width - 1 &&\n      0 <= position.y &&\n      position.y <= this.area.height - 1\n    );\n  };\n\n  moveTetriminoLeft = () => {\n    this.currentTetrimino.moveLeft();\n  };\n\n  moveTetriminoRight = () => {\n    this.currentTetrimino.moveRight();\n  };\n\n  rotateTetriminoClockwise = () => {\n    this.currentTetrimino.rotateClockwise();\n  };\n\n  rotateTetriminoCounterClockwise = () => {\n    this.currentTetrimino.rotateCounterClockwise();\n  };\n}\n\nexport default Grid;\n","import Grid from \"./grid\";\n\nclass Game {\n  elem: HTMLElement = document.createElement(\"div\");\n  grid: Grid = new Grid(this.elem);\n  timerId: number;\n\n  constructor(parentElem) {\n    parentElem.appendChild(this.elem);\n    this.setTimer();\n    document.addEventListener(\"keydown\", (e) => this.onKeyDown(e));\n  }\n\n  toggleTimer = () => {\n    if (this.timerId) {\n      clearInterval(this.timerId);\n      this.timerId = null;\n    } else {\n      this.setTimer();\n    }\n  };\n\n  setTimer = () => {\n    this.timerId = setInterval(() => {\n      this.grid.tick();\n    }, 100);\n  };\n\n  onKeyDown = (e: KeyboardEvent): void => {\n    switch (e.key) {\n      case \"ArrowLeft\":\n        this.grid.moveTetriminoLeft();\n        break;\n      case \"ArrowRight\":\n        this.grid.moveTetriminoRight();\n        break;\n      case \"d\":\n        this.grid.rotateTetriminoClockwise();\n        break;\n      case \"s\":\n        this.grid.rotateTetriminoCounterClockwise();\n        break;\n      case \"p\":\n        this.toggleTimer();\n        break;\n    }\n  };\n}\n\nexport default Game;\n","import Game from \"./game\";\n\nclass App {\n  game: Game | null;\n  elem: HTMLElement = document.getElementById(\"app\");\n\n  constructor() {\n    this.prepareGame();\n  }\n\n  prepareGame = () => {\n    this.game = null;\n    document.addEventListener(\"keypress\", () => {\n      if (this.game) return;\n      this.game = new Game(this.elem);\n    });\n  };\n}\n\nexport default App;\n","import App from \"./app\";\n\nwindow.onload = () => new App();\n"],"names":["CellOuter","parentElem","_this","this","$c1f283888dc145d78e0495992940440$var$_classCallCheck","$c1f283888dc145d78e0495992940440$var$_defineProperty","elem","document","createElement","style","listStyle","width","height","border","display","justifyContent","alignItems","borderColor","inner","fill","clear","initialElem","CellInner","appendChild","_this2","backgroundColor","Position","x","y","$eb570feff44e7af70ef032f6391057a0$var$_classCallCheck","$eb570feff44e7af70ef032f6391057a0$var$_defineProperty","opponent","shapes","patterns","Tetrimino","grid","$df028aa2f109c0c2abf209569d4910$var$_classCallCheck","$df028aa2f109c0c2abf209569d4910$var$_defineProperty","shape","patternIndex","positions","currentPattern","forEach","row","i","cell","j","push","$eb570feff44e7af70ef032f6391057a0$export$default","position","move","down","up","right","left","incrementPatternIndex","decrementPatternIndex","length","attempt","reset","canBeIn","occupiedPositions","every","occupiable","Math","floor","random","area","Area","$e9c46de253b258f807e5a19fa40d487e$var$_classCallCheck","Grid","$edff55f5aeba37ebe413d2da667252$var$_classCallCheck","$edff55f5aeba37ebe413d2da667252$var$_defineProperty","$e9c46de253b258f807e5a19fa40d487e$export$default","$df028aa2f109c0c2abf209569d4910$export$default","gridTemplateColumns","concat","gridTemplateRows","justifyItems","Array","map","$c1f283888dc145d78e0495992940440$export$default","cells","cellsRow","currentTetrimino","sediment","within","_this$sediment","moveDown","apply","$edff55f5aeba37ebe413d2da667252$var$_toConsumableArray","draw","PieceOfSediment","equals","moveLeft","moveRight","rotateClockwise","rotateCounterClockwise","initialCells","Game","$fffca1628359435431f117ee432fa7b2$var$_classCallCheck","$fffca1628359435431f117ee432fa7b2$var$_defineProperty","$edff55f5aeba37ebe413d2da667252$export$default","timerId","clearInterval","setTimer","setInterval","tick","e","key","moveTetriminoLeft","moveTetriminoRight","rotateTetriminoClockwise","rotateTetriminoCounterClockwise","toggleTimer","addEventListener","onKeyDown","App","$f4e96cff181c2608286fa3502e43a3e3$var$_classCallCheck","$f4e96cff181c2608286fa3502e43a3e3$var$_defineProperty","getElementById","game","$fffca1628359435431f117ee432fa7b2$export$default","prepareGame","window","onload","$f4e96cff181c2608286fa3502e43a3e3$export$default"],"version":3,"file":"ts.1f04883f.js.map"}